<div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-9">
        <h1>Events</h1>
        {{ $events := where site.AllPages "Section" "events" }}
        {{ $now := now }}
        <ul class="list-unstyled">
        {{ range $events.ByDate }}
            {{ $eventDate := time .Params.event_date }}
            {{ if ge $eventDate $now }}
                {{ $day := $eventDate.Day }}
                {{ $suffix := "th" }}
                {{ if eq $day 1 21 31 }}{{ $suffix = "st" }}
                {{ else if eq $day 2 22 }}{{ $suffix = "nd" }}
                {{ else if eq $day 3 23 }}{{ $suffix = "rd" }}
                {{ end }}

                {{ $prettyDate := printf "%d%s %s" $day $suffix ($eventDate | time.Format "January") }}
                <li>
                    <span>{{ $prettyDate }}</span>
                    <a href="{{ .RelPermalink }}">{{ .Params.Title }}</a>
                </li>
            {{ end }}    
        {{ end }}
        </ul>
        <hr>
        <h3>Past events</h3>
        <ul class="list-unstyled">
        {{ range $events.ByDate.Reverse }}
            {{ $eventDate := time .Params.event_date }}
            {{ if lt $eventDate $now }}
            <li style="opacity: 0.9;">
                <a href="{{ .RelPermalink }}">{{ .Params.Title }}</a> - {{ $eventDate | time.Format "02/01/2006" }}
            </li>
            {{ end }}
        {{ end }}
        </ul>        
    </div>
</div>